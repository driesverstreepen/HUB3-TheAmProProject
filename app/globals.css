@import "tailwindcss";

/* Tailwind v4 defaults `dark:` to `prefers-color-scheme: dark`.
  This app toggles dark mode via a `.dark` class on <body>.
  Redefine `dark:` so dark styles only apply when the app is actually in dark mode. */
@custom-variant dark (&:where(body.dark, body.dark *, .dark, .dark *));

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: #ffffff;
}

/* Scrollbars: hidden by default, shown briefly while scrolling.
   We toggle `body.show-scrollbars` via a small client listener.
   Notes: we intentionally exclude form controls so textarea/select scrollbars remain usable. */
:root {
  --app-scrollbar-size: 10px;
  --app-scrollbar-thumb: rgba(15, 23, 42, 0.28); /* slate-900-ish */
  --app-scrollbar-thumb-hover: rgba(15, 23, 42, 0.42);
}

body.dark {
  --app-scrollbar-thumb: rgba(255, 255, 255, 0.18);
  --app-scrollbar-thumb-hover: rgba(255, 255, 255, 0.28);
}

body :where(*):not(textarea):not(input):not(select) {
  scrollbar-width: none; /* Firefox */
}

body :where(*):not(textarea):not(input):not(select)::-webkit-scrollbar {
  width: 0;
  height: 0;
}

body.show-scrollbars :where(*):not(textarea):not(input):not(select) {
  scrollbar-width: thin;
  scrollbar-color: var(--app-scrollbar-thumb) transparent;
}

body.show-scrollbars :where(*):not(textarea):not(input):not(select)::-webkit-scrollbar {
  width: var(--app-scrollbar-size);
  height: var(--app-scrollbar-size);
}

body.show-scrollbars :where(*):not(textarea):not(input):not(select)::-webkit-scrollbar-track {
  background: transparent;
}

body.show-scrollbars :where(*):not(textarea):not(input):not(select)::-webkit-scrollbar-thumb {
  background-color: var(--app-scrollbar-thumb);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}

body.show-scrollbars :where(*):not(textarea):not(input):not(select)::-webkit-scrollbar-thumb:hover {
  background-color: var(--app-scrollbar-thumb-hover);
}

/* Force form controls to use dark text on light/white backgrounds across the app.
   This ensures inputs/selects/textareas remain readable when placed on white cards.
   Specific components can still override these with a more specific class if needed. */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="time"],
input[type="date"],
input[type="datetime-local"],
textarea,
select {
  color: #0f172a; /* text-slate-900 */
  background-color: #ffffff;
  background-image: none !important;
  /* Match the text size used by most form inputs (Tailwind `text-sm`) */
  font-size: var(--typo-bodySm-size, 0.875rem);
  line-height: 1.25rem;
}

/* Keep buttons and other controls as-is; we intentionally only target form controls above. */

/* Hide scrollbar for carousel containers */
.scrollbar-hide {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Safari and Chrome */
}

/* Subtle glow animation used by prominent action buttons */
/* Subtle glow animation used by prominent action buttons (hover-only) */
@keyframes glow {
  0% { box-shadow: 0 0 0 rgba(59,130,246,0); }
  50% { box-shadow: 0 0 14px rgba(59,130,246,0.14); }
  100% { box-shadow: 0 0 0 rgba(59,130,246,0); }
}

/* Dark mode overrides when the <body> has the .dark class. We toggle the class
   on the body element to avoid mutating <html> before React hydration. */
body.dark {
  color: #e6eef8; /* light foreground */
  background: #000; /* black background */
}

/* Dark-mode scrollbar styling is handled via CSS vars above and only becomes visible
   when `body.show-scrollbars` is present. */

/* Ensure top-level page wrappers that rely on Tailwind utilities become
   fully black in dark mode. Target common combinations like `min-h-screen
   bg-gray-50` / `min-h-screen bg-slate-50` so we don't accidentally change
   smaller card elements that also use bg-gray-50. */
body.dark .min-h-screen.bg-gray-50,
body.dark .min-h-screen.bg-slate-50,
body.dark .min-h-screen.bg-gray-100,
body.dark .min-h-screen.bg-white {
  background: #000 !important;
}

/* Broad rule: make any full-height page container dark in dark mode. This
   ensures pages that use `min-h-screen` but don't apply a bg- utility also
   become black in dark mode. Cards (with .bg-white etc.) are still handled
   separately by the card gradient rules above. */
body.dark .min-h-screen {
  background: #000 !important;
}

/* Common background replacements */
.dark .bg-white,
.dark .bg-slate-50,
.dark .bg-slate-100,
body.dark .bg-white,
body.dark .bg-slate-50,
body.dark .bg-slate-100 {
  /* Slightly darker surface tint for desktop interface sections */
  background-color: var(--color-zinc-950) !important;
  /* No lift/shadow in dark mode (flat UI) */
  box-shadow: none !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  transition: none;
}
.dark .bg-gray-50, body.dark .bg-gray-50 { background-color: color-mix(in srgb, var(--color-gray-950), transparent 90%) !important; }
.dark .bg-gray-100, body.dark .bg-gray-100 { background-color: color-mix(in srgb, var(--color-gray-600), transparent 90%) !important; }
.dark .bg-gray-200, body.dark .bg-gray-200 { background-color: color-mix(in srgb, var(--color-gray-700), transparent 90%) !important; }

.dark .bg-green-50, body.dark .bg-green-50 { background-color: color-mix(in srgb, var(--color-green-600), transparent 90%) !important; }
.dark .bg-amber-50, body.dark .bg-amber-50 { background-color: color-mix(in srgb, var(--color-amber-600), transparent 90%) !important; }
.dark .bg-blue-50, body.dark .bg-blue-50 { background-color: color-mix(in srgb, var(--color-blue-400), transparent 90%) !important; }
.dark .bg-blue-100, body.dark .bg-blue-100 { background-color: color-mix(in srgb, var(--color-blue-600), transparent 90%) !important; }


/* Remove Tailwind shadows in dark mode across interface pages */
body.dark .shadow,
body.dark .shadow-sm,
body.dark .shadow-md,
body.dark .shadow-lg,
body.dark .shadow-xl,
body.dark .shadow-2xl,
.dark .shadow,
.dark .shadow-sm,
.dark .shadow-md,
.dark .shadow-lg,
.dark .shadow-xl,
.dark .shadow-2xl {
  box-shadow: none !important;
}

body.dark .hover\:shadow-sm:hover,
body.dark .hover\:shadow-md:hover,
body.dark .hover\:shadow-lg:hover,
body.dark .hover\:shadow-xl:hover,
body.dark .hover\:shadow-2xl:hover,
.dark .hover\:shadow-sm:hover,
.dark .hover\:shadow-md:hover,
.dark .hover\:shadow-lg:hover,
.dark .hover\:shadow-xl:hover,
.dark .hover\:shadow-2xl:hover {
  box-shadow: none !important;
}

/* Allow specific surfaces to opt out of the global dark-mode card shadow */
.no-shadow { box-shadow: none !important; }
body.dark .no-shadow,
.dark .no-shadow,
body.dark .bg-white.no-shadow,
.dark .bg-white.no-shadow,
body.dark .bg-slate-50.no-shadow,
.dark .bg-slate-50.no-shadow,
body.dark .bg-slate-100.no-shadow,
.dark .bg-slate-100.no-shadow {
  box-shadow: none !important;
}

/* Dashboard test: ultra-minimal lift/sheened effect in dark mode */
body.dark .dashboard-surface .bg-white,
body.dark .dashboard-surface .bg-slate-50,
body.dark .dashboard-surface .bg-slate-100,
.dark .dashboard-surface .bg-white,
.dark .dashboard-surface .bg-slate-50,
.dark .dashboard-surface .bg-slate-100 {
  box-shadow: none !important;
}

/* Top nav surfaces shouldn't get the global card shadow */
.nav-surface {
  box-shadow: none !important;
}
body.dark .nav-surface {
  box-shadow: none !important;
}

/* Text color adjustments */
/* Primary */
body.dark .text-gray-900, body.dark .text-slate-900, .dark .text-gray-900, .dark .text-slate-900 { color: var(--color-gray-200) !important; }
body.dark .text-gray-700, body.dark .text-slate-700, .dark .text-gray-700, .dark .text-slate-700 { color: var(--color-gray-300) !important; }
body.dark .text-gray-600, body.dark .text-slate-600, .dark .text-gray-600, .dark .text-slate-600 { color: var(--color-gray-500) !important; }
body.dark .text-gray-500, body.dark .text-slate-500, .dark .text-gray-500, .dark .text-slate-500 { color: var(--color-gray-400) !important; }
body.dark .text-gray-50, .dark .text-gray-50 { color: var(--color-gray-50) !important; }

body.dark .text-green-800, .dark .text-green-800 { color: color-mix(in srgb, var(--color-green-200), transparent 40%) !important; }
body.dark .text-amber-800, .dark .text-amber-800 { color: color-mix(in srgb, var(--color-amber-200), transparent 40%) !important; }
body.dark .text-blue-800, .dark .text-blue-800 { color: color-mix(in srgb, var(--color-blue-200), transparent 40%) !important; }
body.dark .text-gray-800, .dark .text-gray-800 { color: color-mix(in srgb, var(--color-gray-200), transparent 40%) !important; }


/* Border color adjustments */
body.dark .border-gray-200, body.dark .border-slate-200, body.dark .border-slate-100, .dark .border-gray-200, .dark .border-slate-200, .dark .border-slate-100 { border-color: color-mix(in srgb, var(--color-gray-400), transparent 80%) !important; }
body.dark .border-green-200, .dark .border-green-200 { border-color: color-mix(in srgb, var(--color-green-200), transparent 80%) !important; }
body.dark .border-amber-200, .dark .border-amber-200 { border-color: color-mix(in srgb, var(--color-amber-200), transparent 80%) !important; }


/* Hover backgrounds used in navigation and buttons */
body.dark .hover\:bg-gray-100:hover, .dark .hover\:bg-gray-100:hover { background-color: color-mix(in srgb, var(--color-gray-200), transparent 80%) !important; }
body.dark .hover\:bg-gray-50:hover, .dark .hover\:bg-gray-50:hover { background-color: color-mix(in srgb, var(--color-gray-200), transparent 90%) !important; }
body.dark .hover\:bg-red-50:hover, .dark .hover\:bg-red-50:hover { background-color: rgba(255,0,0,0.03) !important; }

/* Buttons / prominent actions — keep the blue gradient but with slightly brighter text */
body.dark .text-white, .dark .text-white { color: #f8fafc !important; }

/* Form controls in dark mode */
body.dark input[type="text"],
body.dark input[type="email"],
body.dark input[type="password"],
body.dark input[type="number"],
body.dark input[type="time"],
body.dark input[type="date"],
body.dark input[type="datetime-local"],
body.dark textarea,
.dark input[type="text"],
.dark input[type="email"],
.dark input[type="password"],
.dark input[type="number"],
.dark input[type="time"],
.dark input[type="date"],
.dark input[type="datetime-local"],
.dark textarea,
.dark textarea {
  color: #e6eef8;
  /* In dark mode, inputs should blend into their surrounding surface.
     Keep them transparent so cards/sections define the background. */
  background-color: transparent !important;
  background-image: none !important;
  font-size: var(--typo-bodySm-size, 0.875rem);
  line-height: 1.25rem;
}

/* Selectors (select elements): in dark mode they should not get a gradient/blue fill.
   Keep them transparent so they match the surface they sit on (page black or card surface). */
body.dark select,
.dark select {
  color: #e6eef8;
  background-color: transparent !important;
  background-image: none !important;
}

/* ---- Elevation utilities (consistent depth scale) ---- */
/* elev-0: flat, elev-1: raised (cards), elev-2: floating (modals, overlays) */
.elev-0 { box-shadow: none; border: 1px solid rgba(15,23,42,0.04); }
.elev-1 { box-shadow: 0 6px 18px rgba(2,6,23,0.06); border: 1px solid rgba(2,6,23,0.06); }
.elev-2 { box-shadow: 0 18px 40px rgba(2,6,23,0.09); border: 1px solid rgba(2,6,23,0.08); }

/* Dark-mode variants: lighter/softer halo with subtle inner highlights */
body.dark .elev-0 { box-shadow: none; border: 1px solid rgba(255,255,255,0.02); }
body.dark .elev-1 { box-shadow: none; border: 1px solid rgba(255,255,255,0.03); }
body.dark .elev-2 { box-shadow: none; border: 1px solid rgba(255,255,255,0.04); }

.dark .elev-0 { box-shadow: none; border: 1px solid rgba(255,255,255,0.02); }
.dark .elev-1 { box-shadow: none; border: 1px solid rgba(255,255,255,0.03); }
.dark .elev-2 { box-shadow: none; border: 1px solid rgba(255,255,255,0.04); }

/* Desaturated near-white token for large text and subtle highlights */
:root {
  --near-white: #f8fafc; /* used for buttons and small accents */
  /* Typography semantic colors (used as defaults in global typography config) */
  --typo-fg: #0f172a; /* slate-900 */
  --typo-muted: #475569; /* slate-600 */
  --typo-subtle: #64748b; /* slate-500 */
}
body.dark,
.dark {
  --surface-text: #e6eef8; /* slightly desaturated white for large text */
  --near-white: #e6eef8;
  --typo-fg: #e6eef8;
  --typo-muted: #cbd5e1;
  /* Match the light grey used by UserTopNav desktop inactive tabs */
  --typo-subtle: #94a3b8;

  /* Force token-driven “meta” text to be light grey in dark mode,
     even when typography values are injected from Supabase. */
  --typo-subtitle-color: var(--typo-subtle);
  --typo-bodySm-color: var(--typo-subtle);
  --typo-label-color: var(--typo-subtle);
  --typo-caption-color: var(--typo-subtle);
}

/* Use the new token to reduce emphasis on pure white elements */
.text-surface { color: var(--surface-text) !important; }
.text-near-white { color: var(--near-white) !important; }

/* Ensure titles inside light cards are dark in light mode and readable in dark mode */
/* This catches any stray `text-white` on headings rendered inside card surfaces. */
.bg-white h1, .bg-white h2, .bg-white h3,
.bg-slate-50 h1, .bg-slate-50 h2, .bg-slate-50 h3,
.elev-0 h1, .elev-0 h2, .elev-0 h3,
.elev-1 h1, .elev-1 h2, .elev-1 h3,
.card h1, .card h2, .card h3 {
  color: #0f172a !important; /* text-slate-900 */
}
body.dark .bg-white h1, body.dark .bg-white h2, body.dark .bg-white h3,
body.dark .bg-slate-50 h1, body.dark .bg-slate-50 h2, body.dark .bg-slate-50 h3,
body.dark .elev-0 h1, body.dark .elev-0 h2, body.dark .elev-0 h3,
body.dark .elev-1 h1, body.dark .elev-1 h2, body.dark .elev-1 h3,
body.dark .card h1, body.dark .card h2, body.dark .card h3 {
  color: #e6eef8 !important; /* near-white in dark mode */
}

/* Form control improvements in dark mode */
input::placeholder, textarea::placeholder { color: rgba(15,23,42,0.44); }
body.dark input::placeholder, body.dark textarea::placeholder, .dark input::placeholder, .dark textarea::placeholder {
  color: rgba(230,238,248,0.28); /* readable but subdued */
}

/* Inner subtle highlight for inputs on focus and hover */
input:focus, textarea:focus, select:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(59,130,246,0.06) inset, 0 2px 6px rgba(2,6,23,0.04);
}
body.dark input:focus, body.dark textarea:focus, body.dark select:focus, .dark input:focus, .dark textarea:focus, .dark select:focus {
  box-shadow: 0 0 0 3px rgba(59,130,246,0.06) inset, 0 6px 18px rgba(255,255,255,0.02);
}

/* Respect reduced-motion preference */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Subtle default transitions for interactive elements */
button, a, input, select, textarea { transition: background-color 160ms ease, color 160ms ease, box-shadow 160ms ease, transform 120ms ease; }

/* Utility helpers for using the elevation classes with existing components */
.card { border-radius: 0.75rem; }

/* Utility to remove the gradient/background-image applied by dark-mode card rules
   Use on list items and compact surfaces where a flat background is preferred. */
.no-gradient { background-image: none !important; }
body.dark .no-gradient { 
  background-image: none !important;
  /* make lists solid dark rather than a gradient surface */
  background-color: #071421 !important;
  /* reduce halo for flat list surfaces */
  box-shadow: none !important;
  border: 1px solid rgba(255,255,255,0.02) !important;
}

/* Prominent action button - shared layout utility
   Use this class together with color-specific gradient classes
   (e.g. `bg-linear-to-r from-blue-500 to-blue-600`) so only the
   color/gradient varies between buttons. Keeps width, padding,
   font, and shadow consistent across the app. */
.btn-prominent {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem; /* similar to Tailwind `gap-2` */
  padding: 0.5rem 1rem; /* `py-2 px-4` */
  border-radius: 1.5rem; /* `rounded-lg` */
  font-size: 0.875rem; /* `text-sm` */
  font-weight: 600; /* `font-semibold` */
  color: #ffffff; /* default white text */
  width: 11rem; /* `w-44` */
  margin-left: auto; /* `mx-auto` */
  margin-right: auto;
  box-shadow: 0 6px 18px rgba(2,6,23,0.06); /* similar to `shadow-md` */
  transition: background-color 160ms ease, color 160ms ease, box-shadow 160ms ease, transform 120ms ease;
}
.btn-prominent:hover {
  box-shadow: 0 10px 28px rgba(2,6,23,0.09); /* similar to `hover:shadow-lg` */
}
.btn-prominent:focus { outline: none; }


